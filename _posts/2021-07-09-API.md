---
layout: single
title: "API 활용"
description: "API활용 버스 노선 정보 불러오기"
tags: [Python]
comments: true
published: true
categories: Python
typora-copy-images-to: /assets/images/2021-07-09/API
---

#### 공공API 활용


```python
import requests
from bs4 import BeautifulSoup

bus_id = '100100112'
api_key = 'qllrU5q%2FIy5IEY7QPdyk29YFEKziTWkVrdkGJEGW4bYjZF19Wpbm7P6jel3RuGrAmWWX%2BHcBVCxYsKFAsxsh2w%3D%3D'
url = 'http://ws.bus.go.kr/api/rest/busRouteInfo/getRouteInfo?ServiceKey=%s&busRouteId=%s'%(api_key, bus_id)

html = requests.get(url).text
display(html)
```

---

'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><ServiceResult><comMsgHeader/><msgHeader><headerCd>0</headerCd><headerMsg>정상적으로 처리되었습니다.</headerMsg><itemCount>0</itemCount></msgHeader><msgBody><itemList><busRouteId>100100112</busRouteId><busRouteNm>721</busRouteNm><corpNm>서부운수  02-372-0221</corpNm><edStationNm>건대입구역</edStationNm><firstBusTm>20210709042000</firstBusTm><firstLowTm>20170313000000</firstLowTm><lastBusTm>20210709224000</lastBusTm><lastBusYn> </lastBusYn><lastLowTm>              </lastLowTm><length>43.3</length><routeType>3</routeType><stStationNm>북가좌동</stStationNm><term>8</term></itemList></msgBody></ServiceResult>'

---

![API](/assets/images/2021-07-09/API.PNG)

```python
root = BeautifulSoup(html, 'lxml-xml')
code = root.find('headerCd').get_text()
msg = root.find('headerMsg').get_text()
itemList = root.find('itemList')

print('처리결과:', msg)
if code == '0':
    print('버스번호:',itemList.find('busRouteNm').get_text())
    print('버스회사:',itemList.find('corpNm').get_text())
    print('첫차시간:',itemList.find('firstBusTm').get_text())
    print('막차시간:',itemList.find('lastBusTm').get_text())
    print('배차시간:',itemList.find('term').get_text())
```

---

처리결과: 정상적으로 처리되었습니다.
버스번호: 721
버스회사: 서부운수  02-372-0221
첫차시간: 20210709042000
막차시간: 20210709224000
배차시간: 8

---



```python
bus_id = '100100112'
api_key = 'qllrU5q%2FIy5IEY7QPdyk29YFEKziTWkVrdkGJEGW4bYjZF19Wpbm7P6jel3RuGrAmWWX%2BHcBVCxYsKFAsxsh2w%3D%3D'
url = 'http://ws.bus.go.kr/api/rest/busRouteInfo/getStaionByRoute?ServiceKey=%s&busRouteId=%s'%(api_key, bus_id)

html = requests.get(url).text
```


```python
root = BeautifulSoup(html, 'lxml-xml')
code = root.find('headerCd').get_text()
msg = root.find('headerMsg').get_text()
itemList = root.findAll('itemList')
for item in itemList:
    print('위도 경도:',item.find('gpsX').get_text(),item.find('gpsY').get_text())
    print('정류소:',item.find('stationNm').get_text())

```

---

위도 경도: 126.910257 37.581632
정류소: 서부운수기점
위도 경도: 126.9114608746 37.5802996548
정류소: 북가좌2동주민센터
위도 경도: 126.9109918398 37.576740896
정류소: DMC래미안e.편한세상2.4단지
위도 경도: 126.9133099754 37.5752684365
정류소: 북가좌삼호.DMC아이파크아파트
위도 경도: 126.9163111835 37.5750680632
정류소: DMC파크뷰자이.별동상가
위도 경도: 126.916111454 37.573781858
정류소: DMC.파크뷰자이
위도 경도: 126.9131669679 37.5708653352
정류소: 모래내삼거리
위도 경도: 126.9150627853 37.5690774104
정류소: 모래내시장.가좌역
위도 경도: 126.9181448253 37.5675152918
정류소: 사천교
위도 경도: 126.9239773038 37.5661693552
정류소: 연희104고지앞.구성산회관
위도 경도: 126.9275410215 37.5625221708
정류소: 연남동
위도 경도: 126.9284587797 37.5580596154
정류소: 동교동삼거리
위도 경도: 126.9358930618 37.5553966479
정류소: 신촌오거리.현대백화점
위도 경도: 126.9401437605 37.5560656888
정류소: 신촌오거리.2호선신촌역
위도 경도: 126.9445938349 37.5566130226
정류소: 이대역
위도 경도: 126.951517 37.557092
정류소: 웨딩타운
위도 경도: 126.9547468414 37.5572984359
정류소: 아현역
위도 경도: 126.9634916293 37.5610582642
정류소: 충정로역
위도 경도: 126.966565 37.565579
정류소: 서대문역사거리
위도 경도: 126.97038 37.569135
정류소: 서울역사박물관.경희궁앞
위도 경도: 126.9752507511 37.570135474
정류소: 광화문
위도 경도: 126.9809105247 37.5701184824
정류소: 종로1가
위도 경도: 126.9855426998 37.5701386788
정류소: 종로2가
위도 경도: 126.9895646721 37.5702449756
정류소: 종로3가.탑골공원
위도 경도: 126.9947218896 37.5705069968
정류소: 종로4가.종묘
위도 경도: 126.9988498093 37.570756793
정류소: 종로5가.광장시장
위도 경도: 127.0034638793 37.5709624756
정류소: 종로6가.동대문종합시장
위도 경도: 127.0134512388 37.5723023219
정류소: 동대문역.흥인지문
위도 경도: 127.0204373408 37.5742721533
정류소: 숭인동
위도 경도: 127.0245652731 37.574759758
정류소: 동대문우체국.서울풍물시장
위도 경도: 127.0317924634 37.5737704369
정류소: 용두동신동아아파트
위도 경도: 127.037268 37.573977
정류소: 용두역
위도 경도: 127.0399889148 37.5734588708
정류소: 동대문구청
위도 경도: 127.044292 37.571753
정류소: 신답초등학교.청계한신휴플러스
위도 경도: 127.0543961703 37.5654496127
정류소: 답십리역사거리
위도 경도: 127.0604880807 37.5619909579
정류소: 청년회의소.서울새활용플라자
위도 경도: 127.0661006787 37.5611445259
정류소: 장한평역
위도 경도: 127.0749002776 37.5587937258
정류소: 군자교입구
위도 경도: 127.07882 37.556322
정류소: 능동사거리.군자역
위도 경도: 127.0769927342 37.5528739948
정류소: 능동교회앞
위도 경도: 127.07544 37.549752
정류소: 어린이대공원앞.세종대학교
위도 경도: 127.0736284938 37.5466216409
정류소: 어린이대공원역.화양천주교회
위도 경도: 127.072222 37.543765
정류소: 서울화양초등학교
위도 경도: 127.0709084752 37.5409741643
정류소: 건대입구역사거리.건대병원
위도 경도: 127.070158 37.539081
정류소: 건대역
위도 경도: 127.068967 37.536419
정류소: 대동아파트앞
위도 경도: 127.0690251258 37.5360770905
정류소: 뚝도변전소앞
위도 경도: 127.0701692006 37.5385652456
정류소: 건대역
위도 경도: 127.0709898289 37.5401911408
정류소: 건대입구(가상)
위도 경도: 127.0714328302 37.5413616341
정류소: 건대입구역사거리.건대병원
위도 경도: 127.0735881785 37.5459043941
정류소: 어린이대공원역.화양천주교회
위도 경도: 127.0770314953 37.5520458638
정류소: 어린이대공원앞
위도 경도: 127.0786346746 37.5551766839
정류소: 능동사거리.군자역
위도 경도: 127.0756461481 37.5587409868
정류소: 군자교입구
위도 경도: 127.0672869559 37.5611510646
정류소: 장한평역
위도 경도: 127.0612838214 37.5619653169
정류소: 청년회의소
위도 경도: 127.0550604632 37.5651870868
정류소: 답십리역사거리
위도 경도: 127.0447281029 37.5717559096
정류소: 신답초등학교.청계한신휴플러스
위도 경도: 127.0383261303 37.5740577469
정류소: 동대문구청
위도 경도: 127.0309536211 37.5739292519
정류소: 서울시동부병원
위도 경도: 127.0257176822 37.574427911
정류소: 신설동역.서울풍물시장
위도 경도: 127.0196720085 37.5742434484
정류소: 동묘앞
위도 경도: 127.0120461121 37.5719529259
정류소: 동대문(흥인지문)
위도 경도: 127.0057137364 37.5711272339
정류소: 종로6가.동대문종합시장
위도 경도: 126.9993346185 37.5708806279
정류소: 종로5가.광장시장
위도 경도: 126.9952838124 37.5706271118
정류소: 종로4가.종묘
위도 경도: 126.9899877751 37.5703605443
정류소: 종로3가.탑골공원
위도 경도: 126.9862474502 37.5702571998
정류소: 종로2가
위도 경도: 126.9813906402 37.5702290311
정류소: 종로1가
위도 경도: 126.978085488 37.570216807
정류소: 광화문
위도 경도: 126.970609 37.569412
정류소: 서울역사박물관.경희궁앞
위도 경도: 126.966893 37.566137
정류소: 서대문역사거리
위도 경도: 126.9626986577 37.56002266
정류소: 충정로역
위도 경도: 126.956593 37.557425
정류소: 아현역
위도 경도: 126.952408 37.557227
정류소: 웨딩타운
위도 경도: 126.9472705221 37.5568755655
정류소: 이대역
위도 경도: 126.9389815648 37.555788458
정류소: 신촌오거리.2호선신촌역
위도 경도: 126.9345037666 37.5559833987
정류소: 신촌오거리.현대백화점
위도 경도: 126.92951964 37.5577646946
정류소: 동교동삼거리
위도 경도: 126.9279552211 37.5626233467
정류소: 연희동대우아파트
위도 경도: 126.924998 37.56655
정류소: 연희104고지앞.구성산회관
위도 경도: 126.9175934441 37.5680820886
정류소: 사천교
위도 경도: 126.9140622686 37.5698687461
정류소: 모래내시장.가좌역
위도 경도: 126.913812 37.57125
정류소: 삼성래미안2차아파트
위도 경도: 126.9164488697 37.5736755302
정류소: DMC.파크뷰자이
위도 경도: 126.915772 37.575307
정류소: 동부센트레빌아파트
위도 경도: 126.913058 37.57553
정류소: 북가좌삼호.DMC아이파크아파트
위도 경도: 126.911825 37.576322
정류소: 모래내우체국.증가교회
위도 경도: 126.910333 37.578365
정류소: 북가좌초교사거리
위도 경도: 126.911478 37.579833
정류소: 북가좌2동주민센터

---

